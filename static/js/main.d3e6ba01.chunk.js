(this["webpackJsonphorseless-derby"]=this["webpackJsonphorseless-derby"]||[]).push([[0],{21:function(e,n,t){},27:function(e,n,t){"use strict";t.r(n);var o,c,a,r,s,i,l,b,d,j,u,h=t(1),p=t.n(h),O=t(13),f=t.n(O),x=(t(21),t(11)),g=t(2),m=t(3),v=t(4),k=t(0),y=function(e){var n=e.sentData,t=e.racersReady,o=(e.setRacersReady,Object(h.useState)({})),c=Object(g.a)(o,2),a=(c[0],c[1]),r=Object(h.useState)([]),s=Object(g.a)(r,2);s[0],s[1];Object(h.useEffect)((function(){a(n)}),[n]);return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("table",{className:"horse-table",children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{className:"table-header",children:[Object(k.jsx)("th",{children:"Name"}),Object(k.jsx)("th",{children:"Odds"})]})}),Object(k.jsx)("tbody",{children:function(){var e=[];return t&&Object.entries(n).map((function(n){var t=Object(g.a)(n,2),o=t[0],c=t[1];e.push(Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:c.name}),Object(k.jsx)("td",{children:c.odds})]},o))})),e}()})]})})},w=function(e){var n=e.handleRacers,t=e.racerCount,o=Object(h.useState)([]),c=Object(g.a)(o,2),a=c[0],r=c[1],s=Object(h.useState)(!1),i=Object(g.a)(s,2),l=i[0],b=i[1],d=Object(h.useState)(!1),j=Object(g.a)(d,2),u=j[0],p=j[1],O=Object(h.useState)({}),f=Object(g.a)(O,2),x=f[0],m=f[1];return Object(h.useEffect)((function(){if(l){var e=function(e){console.log("selecting competitors");for(var n={},t=Object.keys(a).length,o=[],c=0;c<e;c++){var r=Math.floor(Math.random()*t);o.includes(r)||(n[c]=a[r],o.push(r))}return p(!0),n}(t);m(e),n(e),b(!1)}}),[l]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(y,{sentData:x,racersReady:u,setRacersReady:p}),Object(k.jsx)("button",{className:"showRacersButton",onClick:function(){l?console.log("horses already loaded"):fetch("horses.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){r(e),b(!0),console.log("horses loaded")}))},children:"Show Racers!"})]})},S=function(e){var n=e.onClick;return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("button",{className:"addUsersButton",onClick:n,children:"Add Users"})})},C=function(e){var n=e.onClick;return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("button",{className:"placeBetsButton",onClick:n,children:"Place Bets"})})},N=function(e){var n=e.onClick;return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("button",{className:"raceButton",onClick:n,children:"Race!"})})},B=t(5),M=v.b.div(o||(o=Object(m.a)(["\n    width: 400px;\n    height: 300px;\n    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);\n    background: #fff;\n    color: #000;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    position: relative;\n    z-index: 10;\n    border-radius: 10px;\n"]))),R=v.b.div(c||(c=Object(m.a)(["\n    display: inline-block;\n    padding: 50px;\n    margin: center;\n    width: 100%;\n\n    line-height: 1.8;\n    color: #141414;\n\n    label {\n        display: inline-block;\n        margin-right: 10px;\n    }\n\n    input {\n        margin: 10px;\n    }\n\n    button {\n        display: inline-block;\n    }\n"]))),F=Object(v.b)(B.a)(a||(a=Object(m.a)(["\n    cursor: pointer;\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    width: 32px;\n    height: 32px;\n    padding: 0;\n    z-index: 10;\n"]))),E=function(e){var n=e.showModal,t=e.setShowModal,o=e.addUser,c=Object(h.useState)(""),a=Object(g.a)(c,2),r=a[0],s=a[1],i=Object(h.useState)(0),l=Object(g.a)(i,2),b=l[0],d=l[1],j=Object(h.useRef)(),u=Object(h.useCallback)((function(e){"Escape"===e.key&&n&&t(!1)}),[t,n]);Object(h.useEffect)((function(){return document.addEventListener("keydown",u),function(){return document.removeEventListener("keydown",u)}}),[u]);var p=function(){s(""),d(0),t(!n)};return Object(k.jsx)(k.Fragment,{children:n?Object(k.jsx)("div",{className:"modal-background",ref:j,onClick:function(e){j.current===e.target&&t(!1)},children:Object(k.jsxs)(M,{children:[Object(k.jsxs)(R,{children:[Object(k.jsx)("label",{htmlFor:"add-user-name",children:"User Name"}),Object(k.jsx)("input",{className:"add-user-name",placeholder:"User Name",onInput:function(e){s(e.target.value)}}),Object(k.jsx)("label",{htmlFor:"add-user-amount",children:"Starting Funds"}),Object(k.jsx)("input",{className:"add-user-amount",placeholder:"0",onInput:function(e){d(e.target.value)}}),Object(k.jsx)("button",{className:"saveBet",onClick:function(){o(r,b)},children:"OK"}),Object(k.jsx)("button",{className:"cancel",onClick:p,children:"Cancel"})]}),Object(k.jsx)(F,{"aria-label":"Close Modal",onClick:p})]})}):null})},z=Object(v.b)(B.a)(r||(r=Object(m.a)(["\n    cursor: pointer;\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    width: 32px;\n    height: 32px;\n    padding: 0;\n    z-index: 10;\n"]))),I=v.b.div(s||(s=Object(m.a)(["\n    width: 400px;\n    height: 350px;\n    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);\n    background: #fff;\n    color: #000;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    position: relative;\n    z-index: 10;\n    border-radius: 10px;\n"]))),H=v.b.div(i||(i=Object(m.a)(["\n    display: inline-block;\n    padding: 50px;\n    margin: center;\n    width: 100%;\n\n    line-height: 1.8;\n    color: #141414;\n\n    label {\n        display: inline-block;\n        margin-right: 10px;\n    }\n\n    input {\n        margin: 10px;\n    }\n\n    button {\n        display: inline-block;\n    }\n"]))),U=function(e){var n=e.showModal,t=e.setShowModal,o=e.bettors,c=e.racers,a=e.racerCount,r=e.saveBet,s=Object(h.useRef)(),i=Object(h.useState)(""),l=Object(g.a)(i,2),b=l[0],d=l[1],j=Object(h.useState)(""),u=Object(g.a)(j,2),p=u[0],O=u[1],f=Object(h.useState)(""),x=Object(g.a)(f,2),m=x[0],v=x[1],y=Object(h.useState)(0),w=Object(g.a)(y,2),S=w[0],C=w[1],N=Object(h.useState)(""),B=Object(g.a)(N,2),M=B[0],R=B[1],F=Object(h.useCallback)((function(e){"Escape"===e.key&&n&&t(!1)}),[t,n]);Object(h.useEffect)((function(){return document.addEventListener("keydown",F),function(){return document.removeEventListener("keydown",F)}}),[F]);var E=function(){d(""),O(""),v(""),C(0),t(!n)};return Object(k.jsx)(k.Fragment,{children:n?Object(k.jsx)("div",{className:"modal-background",ref:s,onClick:function(e){s.current===e.target&&t(!1)},children:Object(k.jsxs)(I,{children:[Object(k.jsxs)(H,{children:[M&&Object(k.jsx)("p",{className:"error",children:M}),Object(k.jsx)("label",{htmlFor:"horse-selection",children:"Horse:"}),Object(k.jsxs)("select",{onChange:function(e){O(e.target.value)},className:"horse-selection",children:[Object(k.jsx)("option",{value:"Select a Horse",children:" -- Select a Horse -- "},"initial-horse"),function(){var e=[];return Object.entries(c).map((function(n){var t=Object(g.a)(n,2),o=(t[0],t[1]);e.push(Object(k.jsx)("option",{value:o.name,children:o.name},o.name))})),e}()]}),Object(k.jsx)("br",{}),Object(k.jsx)("label",{htmlFor:"finish-position",children:"Position"}),Object(k.jsxs)("select",{onChange:function(e){v(e.target.value)},className:"finish-position",children:[Object(k.jsx)("option",{value:"Select a position",children:" -- Select a Position -- "},"initial-position"),function(){for(var e=[Object(k.jsx)("option",{children:"1st"},"1"),Object(k.jsx)("option",{children:"2nd"},"2"),Object(k.jsx)("option",{children:"3rd"},"3")],n=4;n<=a;n++)e.push(Object(k.jsxs)("option",{children:[n,"th"]},n));return e}()]}),Object(k.jsx)("br",{}),Object(k.jsx)("label",{htmlFor:"user-selection",children:"Bettor:"}),Object(k.jsxs)("select",{onChange:function(e){d(e.target.value)},className:"user-selection",children:[Object(k.jsx)("option",{value:"Select a Bettor",children:" -- Select a Bettor -- "},"initial-user"),o.map((function(e){return Object(k.jsx)("option",{value:e.value,children:e.name},e.label)}))]}),Object(k.jsx)("br",{}),Object(k.jsx)("label",{htmlFor:"bet-amount",children:"Bet Amount:"}),Object(k.jsx)("input",{className:"bet-amount",placeholder:"0",onChange:function(e){C(parseInt(e.target.value))}}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{className:"saveBet",onClick:function(){""===p?R("No horse has been selected!"):""===b?R("No bettor has been selected!"):""===m?R("No position has been selected!"):0===S?R("Empty amount for the bet!"):NaN===typeof S?(console.log(typeof S),R("Need to have a number for the bet!")):S<=0?R("Bet needs to be a positive integer!"):S>function(e){for(var n=0;n<o.length;n++)if(o[n].name===e)return o[n].funds}(b)?R("Bettor does not have necessary funds"):(r(b,p,m,S),E())},children:"OK"}),Object(k.jsx)("button",{className:"cancel",onClick:E,children:"Cancel"})]}),Object(k.jsx)(z,{"aria-label":"Close Modal",onClick:E})]})}):null})},A=v.b.div(l||(l=Object(m.a)(["\n    width: 400px;\n    height: 300px;\n    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);\n    background: #fff;\n    color: #000;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    position: relative;\n    z-index: 10;\n    border-radius: 10px;\n"]))),J=v.b.div(b||(b=Object(m.a)(["\n    display: inline-block;\n    padding: 50px;\n    margin: center;\n    width: 100%;\n\n    line-height: 1.8;\n    color: #141414;\n\n    label {\n        display: inline-block;\n        margin-right: 10px;\n    }\n\n    input {\n        margin: 10px;\n    }\n\n    button {\n        display: inline-block;\n    }\n"]))),L=(Object(v.b)(B.a)(d||(d=Object(m.a)(["\n    cursor: pointer;\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    width: 32px;\n    height: 32px;\n    padding: 0;\n    z-index: 10;\n"]))),function(e){var n=e.showModal,t=e.setShowModal,o=e.bettors,c=e.bets,a=e.racers,r=Object(h.useRef)(),s=function(e){for(var n in a)if(a[n].name===e)return console.log("Hello from searchRacers()"),console.log(a[n]),a[n]};return Object(k.jsx)(k.Fragment,{children:n?Object(k.jsx)("div",{className:"modal-background",ref:r,onClick:function(e){r.current===e.target&&t(!1)},children:Object(k.jsx)(A,{children:Object(k.jsxs)(J,{children:[function(){!function(e){console.log("Hello from convertToWeights()"),Object.entries(e).map((function(n,t){var o=e[t].odds.split(j||(j=Object(m.a)(["/"]))).map((function(e){return+e})),c=o[1]/(o[0]+o[1]);e[t].weight=c}))}(a);var e=function(e){console.log("Hello from weightedRandom()");var n=[],t=[],o=[];Object.entries(e).map((function(n,c){t.push(e[c].name),o.push(e[c].weight)}));for(var c=t.length,a=0;a<c;a++){var r=void 0;for(r=0;r<o.length;r++)o[r]+=o[r-1]||0;var s=Math.random()*o[o.length-1];for(r=0;r<o.length&&!(o[r]>s);r++);n.push(t[r]),t.splice(r,1),o.splice(r,1)}return n}(a);for(var n in console.log("Bettors are"),console.log(o),c){var t=c[n].amount,r=c[n].horse,i=parseInt(c[n].position[0]);if(console.log(t),console.log(r),console.log(i),e[i-1]===r){var l=s(r),b=parseInt(l.odds.split("/")[0]*t);o[n].funds+=b}}console.log("Race conclusion"),console.log(e),console.log(o)}(),Object(k.jsx)("button",{className:"okButton",onClick:function(){return t(!n)},children:"OK"})]})})}):null})}),K=v.b.div(u||(u=Object(m.a)(["\n  display: flex;\n"])));var P,D=function(){var e=Object(h.useState)(!1),n=Object(g.a)(e,2),t=(n[0],n[1],Object(h.useState)(!1)),o=Object(g.a)(t,2),c=o[0],a=o[1],r=Object(h.useState)(!1),s=Object(g.a)(r,2),i=s[0],l=s[1],b=Object(h.useState)(!1),d=Object(g.a)(b,2),j=d[0],u=d[1],p=Object(h.useState)([]),O=Object(g.a)(p,2),f=O[0],m=O[1],v=Object(h.useState)(5),y=Object(g.a)(v,2),B=y[0],M=(y[1],Object(h.useState)([])),R=Object(g.a)(M,2),F=R[0],z=R[1],I=Object(h.useState)(JSON.parse(localStorage.getItem("bettors"))),H=Object(g.a)(I,2),A=H[0],J=H[1];return Object(h.useEffect)((function(){}),[F,f]),Object(h.useEffect)((function(){localStorage.setItem("bettors",JSON.stringify(A)),console.log(A)}),[A]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(K,{children:Object(k.jsx)(w,{handleRacers:function(e){m(e)},racerCount:B})}),Object(k.jsxs)(K,{children:[Object(k.jsx)(S,{onClick:function(){a(!c)},bettors:A}),Object(k.jsx)(E,{showModal:c,setShowModal:a,addUser:function(e,n){console.log("Name is: "+e),console.log("Amount is: "+n),J([].concat(Object(x.a)(A),[{name:e,funds:parseInt(n)}]))}})]}),Object(k.jsxs)(K,{children:[Object(k.jsx)(C,{onClick:function(){!function(){var e=localStorage.getItem("bettors");console.log("Hello from handleLocalBettors"),console.log(e),e!==[]&&J(JSON.parse(e))}(),l(!i)}}),Object(k.jsx)(U,{showModal:i,setShowModal:l,bettors:A,racers:f,racerCount:B,saveBet:function(e,n,t,o){z([].concat(Object(x.a)(F),[{bettor:e,horse:n,position:t,amount:o}])),function(e,n){for(var t=0;t<A.length;t++)A[t].name===e&&(A[t].funds+=n)}(e,-o)}})]}),Object(k.jsxs)(K,{children:[Object(k.jsx)(N,{onClick:function(){u(!j)}}),Object(k.jsx)(L,{showModal:j,setShowModal:u,bettors:A,bets:F,racers:f})]})]})},T=Object(v.a)(P||(P=Object(m.a)(["\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    font-family: 'Arial', sans-serif;\n\n    button {\n      min-width: 150px;\n      padding: 10px 24px;\n      border-radius: 7px;\n      border: none;\n      background: black;\n      color: #fff;\n      font-size: 20px;\n      cursor: pointer;\n      margin: 5px;\n    }\n\n    background {\n      z-index: auto;\n      display: flex;\n      position: fixed;\n      top: 0;\n      left: 0;\n      height: 100vh;\n      width: 100vw;\n      background: rgba(0, 0, 0, 0.5);\n      justify-content: center;\n      align-items: center;\n    }\n\n    div.modal-background {\n      z-index: auto;\n      display: flex;\n      position: fixed;\n      top: 0;\n      left: 0;\n      height: 100vh;\n      width: 100vw;\n      background: rgba(0, 0, 0, 0.5);\n      justify-content: center;\n      align-items: center;\n    }\n\n    div.modal-wrapper {\n      width: 800px;\n      height: 500px;\n      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);\n      background: #fff;\n      color: #000;\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      position: relative;\n      z-index: 10;\n      border-radius: 10px;\n    }\n\n    div.modal-content {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      line-height: 1.8;\n      color: #141414;\n  \n      p {\n          margin-bottom: 1rem;\n      }\n  \n      button {\n          padding: 10px 24px;\n          background: #141414;\n          color: #fff;\n          border: none;\n      }\n    }\n\n    label {\n      font-family: sans-serif;\n    }\n"])));f.a.render(Object(k.jsxs)(p.a.StrictMode,{children:[Object(k.jsx)(T,{}),Object(k.jsx)(D,{})]}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.d3e6ba01.chunk.js.map